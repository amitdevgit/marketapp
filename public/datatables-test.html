<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DataTables Test</title>
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.13.7/css/jquery.dataTables.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/buttons/2.4.2/css/buttons.dataTables.min.css">
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.7/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.4.2/js/dataTables.buttons.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.4.2/js/buttons.html5.min.js"></script>
</head>
<body>
    <h1>DataTables Column Count Test</h1>
    
    <table id="testTable" class="min-w-full divide-y divide-gray-200">
        <thead class="bg-gray-50">
            <tr>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Payment #</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Customer</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Bill</th>
                <th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Amount</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Method</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Date</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                <th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
            </tr>
        </thead>
        <tbody class="bg-white divide-y divide-gray-200">
            <tr class="hover:bg-gray-50">
                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">#1</td>
                <td class="px-6 py-4 whitespace-nowrap">
                    <div class="flex items-center">
                        <div class="h-8 w-8 bg-indigo-100 rounded-full flex items-center justify-center mr-3">
                            <span class="text-sm font-medium text-indigo-600">T</span>
                        </div>
                        <div>
                            <div class="text-sm font-medium text-gray-900">Test Customer 1</div>
                            <div class="text-sm text-gray-500">9876543210</div>
                        </div>
                    </div>
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    <a href="#" class="text-indigo-600 hover:text-indigo-900">#19</a>
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-900 text-right">₹500.00</td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">Cash</span>
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Oct 22, 2025</td>
                <td class="px-6 py-4 whitespace-nowrap">
                    <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">Completed</span>
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                    <div class="flex items-center justify-end space-x-2">
                        <a href="#" class="text-indigo-600 hover:text-indigo-900" title="View">👁</a>
                        <a href="#" class="text-blue-600 hover:text-blue-900" title="Edit">✏️</a>
                        <button class="text-red-600 hover:text-red-900" title="Delete">🗑️</button>
                    </div>
                </td>
            </tr>
            <tr class="hover:bg-gray-50">
                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">#2</td>
                <td class="px-6 py-4 whitespace-nowrap">
                    <div class="flex items-center">
                        <div class="h-8 w-8 bg-indigo-100 rounded-full flex items-center justify-center mr-3">
                            <span class="text-sm font-medium text-indigo-600">T</span>
                        </div>
                        <div>
                            <div class="text-sm font-medium text-gray-900">Test Customer 2</div>
                            <div class="text-sm text-gray-500">9876543211</div>
                        </div>
                    </div>
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    <a href="#" class="text-indigo-600 hover:text-indigo-900">#20</a>
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-900 text-right">₹2000.00</td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">Bank Transfer</span>
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Oct 22, 2025</td>
                <td class="px-6 py-4 whitespace-nowrap">
                    <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">Completed</span>
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                    <div class="flex items-center justify-end space-x-2">
                        <a href="#" class="text-indigo-600 hover:text-indigo-900" title="View">👁</a>
                        <a href="#" class="text-blue-600 hover:text-blue-900" title="Edit">✏️</a>
                        <button class="text-red-600 hover:text-red-900" title="Delete">🗑️</button>
                    </div>
                </td>
            </tr>
            <tr class="hover:bg-gray-50">
                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">#3</td>
                <td class="px-6 py-4 whitespace-nowrap">
                    <div class="flex items-center">
                        <div class="h-8 w-8 bg-indigo-100 rounded-full flex items-center justify-center mr-3">
                            <span class="text-sm font-medium text-indigo-600">T</span>
                        </div>
                        <div>
                            <div class="text-sm font-medium text-gray-900">Test Customer 3</div>
                            <div class="text-sm text-gray-500">9876543212</div>
                        </div>
                    </div>
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    <span class="text-gray-400">General Payment</span>
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm font-semibold text-gray-900 text-right">₹300.00</td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">UPI</span>
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Oct 22, 2025</td>
                <td class="px-6 py-4 whitespace-nowrap">
                    <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">Completed</span>
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                    <div class="flex items-center justify-end space-x-2">
                        <a href="#" class="text-indigo-600 hover:text-indigo-900" title="View">👁</a>
                        <a href="#" class="text-blue-600 hover:text-blue-900" title="Edit">✏️</a>
                        <button class="text-red-600 hover:text-red-900" title="Delete">🗑️</button>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>

    <div id="test-results"></div>

    <script>
    $(document).ready(function() {
        console.log('Initializing DataTables...');
        
        try {
            $('#testTable').DataTable({
                dom: 'Bfrtip',
                buttons: [
                    {
                        extend: 'excel',
                        text: '<i class="fas fa-file-excel"></i> Excel',
                        className: 'btn btn-success'
                    },
                    {
                        extend: 'pdf',
                        text: '<i class="fas fa-file-pdf"></i> PDF',
                        className: 'btn btn-danger'
                    }
                ],
                pageLength: 25,
                order: [[0, 'desc']],
                columnDefs: [
                    { orderable: false, targets: [7] } // Actions column (8th column, index 7)
                ],
                responsive: true,
                autoWidth: false
            });
            
            $('#test-results').html('<div style="color: green; font-weight: bold;">✅ DataTables initialized successfully! No column count error.</div>');
            console.log('DataTables initialized successfully!');
            
        } catch (error) {
            $('#test-results').html('<div style="color: red; font-weight: bold;">❌ DataTables error: ' + error.message + '</div>');
            console.error('DataTables error:', error);
        }
    });
    </script>
</body>
</html>
